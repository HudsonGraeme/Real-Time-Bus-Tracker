{"version":3,"sources":["pages/Withdraw.jsx","components/TransactionPage.jsx"],"names":["Withdraw","user","useContext","UserContext","schema","Yup","shape","account","required","amount","typeError","min","max","validNumber","balance","Number","POSITIVE_INFINITY","capitalize","name","formatCurrency","validationSchema","title","transactionType","TransactionPage","transact","useState","alert","setAlert","className","open","variant","type","message","Title","Body","onSubmit","resetForm","then","catch","ex","finally","setTimeout","submitForm","initialValues","email","handleSubmit","handleChange","values","dirty","isValid","errors","Group","label","Select","value","disabled","isInvalid","first_name","last_name","parseFloat","username","Label","hasValidation","Text","id","Control","placeholder","onChange","Feedback"],"mappings":"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","file":"static/js/11.b052eb3d.chunk.js","sourcesContent":["import * as Yup from 'yup';\nimport { UserContext } from '../services/UserContext';\nimport { useContext } from 'react';\nimport { formatCurrency, validNumber } from '../services/Utilities';\nimport TransactionPage from '../components/TransactionPage';\nimport capitalize from 'lodash/capitalize';\n\nconst Withdraw = () => {\n  const { user } = useContext(UserContext);\n  const schema = Yup.object().shape({\n    account: Yup.string().required(),\n    amount: Yup.number()\n      .typeError('Please enter a valid, non-negative number')\n      .min(0.01, 'Please enter a value above zero')\n      .max(\n        validNumber(user.balance)\n          ? user.balance + 100\n          : Number.POSITIVE_INFINITY,\n        `Please enter a value below ${capitalize(\n          user.name\n        )}'s maximum overdraft limit (${formatCurrency(-100)})`\n      )\n      .required(),\n  });\n\n  return (\n    <TransactionPage\n      validationSchema={schema}\n      title={'Make a Withdrawal'}\n      transactionType={'Withdraw'}\n    />\n  );\n};\n\nexport default Withdraw;\n","import {\n  Card,\n  FloatingLabel,\n  InputGroup,\n  Button,\n  Form,\n  Alert,\n} from 'react-bootstrap';\nimport { Formik } from 'formik';\nimport { UserContext } from '../services/UserContext';\nimport { useContext } from 'react';\nimport capitalize from 'lodash/capitalize';\nimport { useState } from 'react';\nimport { formatCurrency, validNumber } from '../services/Utilities';\n\nconst TransactionPage = ({ title, transactionType, validationSchema }) => {\n  const { user, transact } = useContext(UserContext);\n  const [alert, setAlert] = useState({});\n\n  const submitForm = (amount, resetForm) => {\n    transact(transactionType === 'Withdraw' ? -amount : amount)\n      .then(() => {\n        resetForm();\n        if (transactionType === 'Withdraw' && amount > user.balance) {\n          setAlert({\n            open: true,\n            type: 'warning',\n            message:\n              'Successfully completed your transaction, however your account is in overdraft. Please make a deposit at your earliest convenience.',\n          });\n        } else {\n          setAlert({\n            open: true,\n            type: 'success',\n            message: 'Successfully completed your transaction.',\n          });\n        }\n      })\n      .catch((ex) =>\n        setAlert({\n          open: true,\n          type: 'danger',\n          message:\n            'Failed to complete your transaction. Please check your information and try again.',\n        })\n      )\n      .finally(() => {\n        setTimeout(() => setAlert({}), 2500);\n      });\n  };\n\n  return (\n    <Card className=\"mx-auto w-50 mt-5 p-5\">\n      {alert.open && <Alert variant={alert.type}>{alert.message}</Alert>}\n      <Card.Title className=\"mb-5 text-left display-4\">{title}</Card.Title>\n      <Card.Body>\n        <Formik\n          validationSchema={validationSchema}\n          onSubmit={({ amount }, { resetForm }) => {\n            submitForm(amount, resetForm);\n          }}\n          initialValues={{\n            account: user.email,\n            amount: 0.0,\n          }}\n        >\n          {({ handleSubmit, handleChange, values, dirty, isValid, errors }) => (\n            <Form onSubmit={handleSubmit}>\n              <Form.Group className=\"my-2\">\n                <FloatingLabel\n                  label={\n                    !!errors.account\n                      ? capitalize(errors.account)\n                      : `Account to ${transactionType} ${\n                          transactionType === 'Withdraw' ? 'from' : 'to'\n                        }`\n                  }\n                  className={!!errors.account && 'text-danger font-weight-bold'}\n                >\n                  <Form.Select\n                    className=\"form-select mb-4\"\n                    value={values.account}\n                    name=\"account\"\n                    disabled\n                    isInvalid={!!errors.account}\n                  >\n                    <option\n                      key={`option-account-${user.username}`}\n                      value={user.email}\n                    >\n                      {`${capitalize(user.first_name)} ${capitalize(\n                        user.last_name\n                      )} (${\n                        validNumber(user.balance)\n                          ? formatCurrency(user.balance)\n                          : 'Balance Error'\n                      }) ${\n                        validNumber(user.balance) &&\n                        parseFloat(user.balance) <= 0\n                          ? '***Overdraft***'\n                          : ''\n                      }`}\n                    </option>\n                  </Form.Select>\n                </FloatingLabel>\n              </Form.Group>\n              <Form.Group className=\"my-2\">\n                <Form.Label>Amount</Form.Label>\n                <InputGroup hasValidation>\n                  <InputGroup.Text id=\"inputGroupPrepend\">$</InputGroup.Text>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"amount\"\n                    placeholder=\"99.99\"\n                    value={values.amount}\n                    onChange={handleChange}\n                    isInvalid={!!errors.amount}\n                  />\n                  <Form.Control.Feedback type=\"invalid\">\n                    {capitalize(errors.amount)}\n                  </Form.Control.Feedback>\n                </InputGroup>\n              </Form.Group>\n              <Button\n                type=\"submit\"\n                className=\"mt-5 w-50 mx-2 inline-block\"\n                disabled={!isValid || !dirty}\n              >\n                {`${transactionType} `}\n                {isValid &&\n                  validNumber(values.amount) &&\n                  formatCurrency(values.amount)}\n                {isValid &&\n                  ` ${\n                    transactionType === 'Withdraw' ? 'from' : 'into'\n                  } ${capitalize(user.first_name)}'s account`}\n              </Button>\n            </Form>\n          )}\n        </Formik>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default TransactionPage;\n"],"sourceRoot":""}