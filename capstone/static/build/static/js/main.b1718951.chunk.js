(this.webpackJsonpbad_bank=this.webpackJsonpbad_bank||[]).push([[2],{113:function(e,t,n){"use strict";t.a=n.p+"static/media/BankLogo.c839211a.png"},135:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),o=n.n(c),i=(n(135),n(4)),u=n(250),s=n(247),l=n(249),d=n(248),h=n(123),b=n(28),j=n.n(b),f=n(30),p=n(10),m=n(37),g=n(3),O=n(1),x=Object(p.g)((function(e){var t=e.location,n=Object(a.useContext)(m.b),r=n.user,c=n.userExists,o=Object(a.useState)([]),b=Object(i.a)(o,2),p=b[0],x=b[1];return Object(a.useEffect)((function(){c()||sessionStorage.getItem(g.f.token)?x([g.e.home,g.e.withdraw,g.e.deposit,g.e.data,g.e.logout]):x([g.e.home,g.e.login,g.e.create_account])}),[c,r]),Object(O.jsx)(u.a,{bg:"light",expand:"lg",children:Object(O.jsxs)(s.a,{children:[Object(O.jsx)(u.a.Brand,{to:g.e.home.path,as:f.b,children:"Bad Bank"}),Object(O.jsx)(u.a.Toggle,{}),Object(O.jsx)(u.a.Collapse,{className:"justify-content-end",children:Object(O.jsxs)(l.a,{children:[p.map((function(e){return Object(O.jsx)(d.a,{trigger:["hover","focus"],placement:"bottom",overlay:Object(O.jsxs)(h.a,{children:[Object(O.jsx)(h.a.Header,{children:e.name}),Object(O.jsx)(h.a.Body,{children:e.description})]}),children:Object(O.jsx)(l.a.Link,{className:"nav-link ".concat(j()(e.path,t.pathname)&&"text-primary"," ").concat(j()(e,g.e.create_account)&&"bg-primary rounded text-light mr-4"," ").concat((j()(e,g.e.login)||j()(e,g.e.logout))&&"bg-dark text-light bold rounded mx-2"),to:e.path,as:f.b,children:e.name},"header-link-".concat(e.name))},"pop-header-".concat(e.name,"}"))})),c?Object(O.jsx)(l.a.Link,{children:r.name}):null]})})]})})})),v=n(117),k=function(){return Object(O.jsx)("div",{className:"fixed-bottom bg-light",children:Object(O.jsx)(u.a,{children:Object(O.jsx)(s.a,{children:Object(O.jsx)(v.a,{children:"Bad Bank\u2122"})})})})},w=n(113),y=(n(233),n(234),r.a.lazy((function(){return n.e(8).then(n.bind(null,315))}))),C=function(){return Object(O.jsxs)("div",{className:"w-100 h-100 bg-light text-dark",children:[Object(O.jsx)("img",{src:w.a,alt:"Logo",height:"256px"}),Object(O.jsx)("h1",{className:"p-5",children:"Loading..."})]})},S=function(){var e=Object(a.useContext)(m.b).userExists,t=function(e){var t=e.children;return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(C,{}),children:t})};return Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)(f.a,{basename:"/",children:[Object(O.jsx)(x,{}),Object(O.jsxs)(p.d,{children:[Object.values(g.e).map((function(n){return Object(O.jsx)(p.b,{path:n.path,exact:!0,children:!n.walled||e()&&!j()(n,g.e.create_account)&&!j()(n,g.e.login)?Object(O.jsx)(t,{children:n.component}):Object(O.jsx)(p.a,{to:e()?"/data":"/login"})},"route-".concat(n.name))})),Object(O.jsx)(p.b,{children:Object(O.jsx)(t,{children:Object(O.jsx)(y,{})})})]}),Object(O.jsx)(k,{})]})})},_=function(e){e&&e instanceof Function&&n.e(14).then(n.bind(null,313)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(m.a,{children:Object(O.jsx)(S,{})})}),document.getElementById("root")),_()},3:function(e,t,n){"use strict";n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return g}));var a=n(0),r=n.n(a),c=n(1),o=r.a.lazy((function(){return n.e(7).then(n.bind(null,236))})),i=r.a.lazy((function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,237))})),u=r.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,238))})),s=r.a.lazy((function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,239))})),l=r.a.lazy((function(){return Promise.all([n.e(1),n.e(5),n.e(9)]).then(n.bind(null,240))})),d=r.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(13)]).then(n.bind(null,241))})),h=r.a.lazy((function(){return n.e(6).then(n.bind(null,242))})),b={home:{name:"Home",path:"/",description:"Our homepage",component:Object(c.jsx)(o,{}),walled:!1},withdraw:{name:"Withdraw",path:"/withdraw",description:"Make a withdrawal",component:Object(c.jsx)(i,{}),walled:!0},deposit:{name:"Deposit",path:"/deposit",description:"Make a deposit",component:Object(c.jsx)(s,{}),walled:!0},data:{name:"My Data",path:"/data",description:"View all of your data",component:Object(c.jsx)(l,{}),walled:!0},create_account:{name:"Create Account",path:"/create-account",description:"Create an account",component:Object(c.jsx)(u,{}),walled:!1},login:{name:"Login",path:"/login",description:"Log into the bank",component:Object(c.jsx)(d,{}),walled:!1},logout:{name:"Logout",path:"/logout",description:"Log out of the bank",component:Object(c.jsx)(h,{}),walled:!0}},j={auth:{sign_up:"/auth/signup",login:"/auth/login",logout:"/auth/logout"},user:"/me",transactions:"/transactions"},f={post:"post",get:"get",patch:"patch",delete:"delete",put:"put"},p={ci:"ci",dev:"development",prod:"production"},m={api_dev:"http://localhost:3000"},g={token:"token"}},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return k}));var a=n(4),r=n(20),c=n(2),o=n(0),i=n(3),u=n(7),s=n.n(u),l=n(14),d=n(122),h="production"===i.d.dev?i.a.api_dev:"",b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(l.a)(s.a.mark((function a(r){var o,u;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o={},r&&(o.json=Object(c.a)({},r)),n&&(u=sessionStorage.getItem(i.f.token))&&(o.headers={token:u}),a.abrupt("return",d.a[t](h+e,o).then((function(e){return e.json()})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},j=b(i.b.auth.sign_up,i.c.post),f=b(i.b.auth.login,i.c.post),p=(b(i.b.auth.logout,i.c.post,!0),b(i.b.user,i.c.get,!0)),m=(b(i.b.user,i.c.patch,!0),b(i.b.transactions,i.c.get,!0),b(i.b.transactions,i.c.patch,!0)),g=n(85),O=n(116),x=n.n(O),v=n(1),k=Object(o.createContext)(),w="LOAD_USER",y="TRANSACTION",C="DELETE_USER",S=function(e,t){var n=e;switch(t.type){case w:if(!t.user){console.error("Cannot add a user without a user to add");break}var a=x()(t.user);a.name=Object(g.a)([t.first_name,t.last_name].join(" ")),a.token&&sessionStorage.setItem(i.f.token,a.token),n=Object(c.a)(Object(c.a)({},e),a);break;case y:if(!t.user||!t.value){console.error("Cannot withdraw without a value or user");break}n=Object(c.a)(Object(c.a)({},e),{},{transactions:t.value});break;case C:if(!t.user){console.error("Cannot remove a user without a username");break}n=Object(r.a)(e.filter((function(e){return e.id!==t.user})));break;default:console.error("userReducer called without an action type")}return n},_=function(e){var t=e.children,n=Object(o.useReducer)(S,{}),r=Object(a.a)(n,2),c=r[0],u=r[1],s=Object(o.useCallback)((function(){return p().then((function(e){return u({type:w,user:e})})).catch((function(e){return console.error("Failed to fetch user data",e)}))}),[]);Object(o.useEffect)(s,[s]);return Object(v.jsx)(k.Provider,{value:{user:c,userExists:function(){return!!Object.keys(c).length||sessionStorage.getItem(i.f.token)},transact:function(e){return m({value:e}).then((function(e){u({type:y,value:e}),s()})).catch((function(e){return console.error("Failed to post transaction",e)}))},createUser:function(e){j(e).then((function(e){return u({type:w,user:e})})).catch((function(e){return console.error(e)}))},signin:function(e){return f(e).then((function(e){return u({type:w,user:e})}))},deleteUser:function(e){u({type:C,user:e})},fetchUser:s,logout:function(){sessionStorage.clear(),window.location.href=i.e.login.path}},children:t})}},85:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return h}));var a=n(114),r=n.n(a),c=n(115),o=n.n(c),i=new Intl.NumberFormat("en-US",{currency:"USD",style:"currency"}),u=new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),s=function(e){var t=parseFloat(e);return i.format(t)},l=function(e){return u.format(e)},d=function(e){return e||0===e},h=function(e){return o()(r()(e))}}},[[235,3,4]]]);
//# sourceMappingURL=main.b1718951.chunk.js.map