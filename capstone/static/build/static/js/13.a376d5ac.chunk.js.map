{"version":3,"sources":["pages/Login.jsx"],"names":["schema","Yup","shape","email","default","required","password","Login","signin","useContext","UserContext","useState","alert","setAlert","history","useHistory","className","open","variant","type","message","Title","Body","validationSchema","onSubmit","vals","e","resetForm","then","push","routes","data","path","catch","ex","finally","setTimeout","submitForm","initialValues","handleSubmit","handleChange","values","isValid","errors","dirty","Group","as","Row","Label","hasValidation","Control","name","autoComplete","placeholder","value","isInvalid","onChange","Feedback","capitalize","Text","disabled","Footer","Link","to","create_account"],"mappings":"uPAaMA,EAASC,MAAaC,MAAM,CAChCC,MAAOF,MACJG,QAAQ,IACRD,QACAE,SAAS,8BACZC,SAAUL,MAAaG,QAAQ,IAAIC,SAAS,mCAmH/BE,UAhHD,WAAO,IACXC,EAAWC,qBAAWC,KAAtBF,OADU,EAEQG,mBAAS,IAFjB,mBAEXC,EAFW,KAEJC,EAFI,KAGZC,EAAUC,cA0BhB,OACE,eAAC,IAAD,CAAMC,UAAU,oBAAhB,UACGJ,EAAMK,MAAQ,cAAC,IAAD,CAAOC,QAASN,EAAMO,KAAtB,SAA6BP,EAAMQ,UAClD,cAAC,IAAKC,MAAN,CAAYL,UAAU,gCAAtB,mBACA,cAAC,IAAKM,KAAN,CAAWN,UAAU,MAArB,SACE,cAAC,IAAD,CACEO,iBAAkBvB,EAClBwB,SAAU,SAACC,EAAD,IA/BC,SAACC,EAAGC,GACrBnB,EAAOkB,GACJE,MAAK,WACJD,IACAd,EAAS,CACPI,MAAM,EACNE,KAAM,UACNC,QAAS,2BAEXN,EAAQe,KAAKC,IAAOC,KAAKC,SAE1BC,OAAM,SAACC,GAAD,OACLrB,EAAS,CACPI,MAAM,EACNE,KAAM,SACNC,QACE,qEAGLe,SAAQ,WACPC,YAAW,kBAAMvB,EAAS,MAAK,SAY3BwB,CAAWZ,EADsB,EAAhBE,YAGnBW,cAAe,CACbnC,MAAO,GACPG,SAAU,IAPd,SAUG,gBAAGiC,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,aAAcC,EAA/B,EAA+BA,OAAQC,EAAvC,EAAuCA,QAASC,EAAhD,EAAgDA,OAAQC,EAAxD,EAAwDA,MAAxD,OACC,eAAC,IAAD,CAAMpB,SAAUe,EAAhB,UACE,eAAC,IAAKM,MAAN,CAAYC,GAAIC,IAAK/B,UAAU,OAA/B,UACE,cAAC,IAAKgC,MAAN,oBACA,eAAC,IAAD,CAAYC,eAAa,EAAzB,UACE,cAAC,IAAKC,QAAN,CACE/B,KAAK,OACLgC,KAAK,QACLC,aAAa,QACbC,YAAY,YACZC,MAAOb,EAAOtC,MACdoD,YAAaZ,EAAOxC,MACpBqD,SAAUhB,IAEZ,cAAC,IAAKU,QAAQO,SAAd,CAAuBtC,KAAK,UAA5B,SACGuC,qBAAWf,EAAOxC,eAIzB,eAAC,IAAK0C,MAAN,CAAYC,GAAIC,IAAK/B,UAAU,OAA/B,UACE,cAAC,IAAKgC,MAAN,uBACA,eAAC,IAAD,CAAYC,eAAa,EAAzB,UACE,cAAC,IAAWU,KAAZ,CACE3C,YACI2B,EAAOrC,UAAY,mCAFzB,0BAOA,cAAC,IAAK4C,QAAN,CACE/B,KAAK,WACLgC,KAAK,WACLC,aAAa,eACbE,MAAOb,EAAOnC,SACd+C,YAAY,iBACZE,YAAaZ,EAAOrC,SACpBkD,SAAUhB,IAEZ,cAAC,IAAKU,QAAQO,SAAd,CAAuBtC,KAAK,UAA5B,SACGuC,qBAAWf,EAAOrC,kBAIzB,cAAC,IAAD,CACEa,KAAK,SACLyC,UAAWlB,IAAYE,EACvB5B,UAAU,8BAHZ,2BAWR,cAAC,IAAK6C,OAAN,CAAa7C,UAAU,6CAAvB,SACE,cAAC,IAAD,CACEE,QAAQ,UACRF,UAAU,OACV8B,GAAIgB,IACJC,GAAIjC,IAAOkC,eAAehC,KAJ5B","file":"static/js/13.a376d5ac.chunk.js","sourcesContent":["import { useState } from 'react';\nimport { Card, InputGroup, Button, Row, Form } from 'react-bootstrap';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { UserContext } from '../services/UserContext';\nimport { useContext } from 'react';\nimport { capitalize } from 'lodash';\nimport { Alert } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { routes } from '../constants';\nimport { useHistory } from 'react-router-dom';\n\n// Frontend validation\nconst schema = Yup.object().shape({\n  email: Yup.string()\n    .default('')\n    .email()\n    .required('Please enter a valid email'),\n  password: Yup.string().default('').required('Please enter a valid password'),\n});\n\nconst Login = () => {\n  const { signin } = useContext(UserContext);\n  const [alert, setAlert] = useState({});\n  const history = useHistory();\n\n  const submitForm = (e, resetForm) => {\n    signin(e)\n      .then(() => {\n        resetForm();\n        setAlert({\n          open: true,\n          type: 'success',\n          message: 'Successfully signed in',\n        });\n        history.push(routes.data.path);\n      })\n      .catch((ex) =>\n        setAlert({\n          open: true,\n          type: 'danger',\n          message:\n            'Failed to login. Please check your credentials and try again.',\n        })\n      )\n      .finally(() => {\n        setTimeout(() => setAlert({}), 2500);\n      });\n  };\n\n  return (\n    <Card className=\"mx-auto w-50 mt-5\">\n      {alert.open && <Alert variant={alert.type}>{alert.message}</Alert>}\n      <Card.Title className=\"mb-5 pt-5 text-left display-4\">Login</Card.Title>\n      <Card.Body className=\"p-5\">\n        <Formik\n          validationSchema={schema}\n          onSubmit={(vals, { resetForm }) => {\n            submitForm(vals, resetForm);\n          }}\n          initialValues={{\n            email: '',\n            password: '',\n          }}\n        >\n          {({ handleSubmit, handleChange, values, isValid, errors, dirty }) => (\n            <Form onSubmit={handleSubmit}>\n              <Form.Group as={Row} className=\"my-2\">\n                <Form.Label>Email</Form.Label>\n                <InputGroup hasValidation>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"email\"\n                    autoComplete=\"email\"\n                    placeholder=\"MrJohnDoe\"\n                    value={values.email}\n                    isInvalid={!!errors.email}\n                    onChange={handleChange}\n                  />\n                  <Form.Control.Feedback type=\"invalid\">\n                    {capitalize(errors.email)}\n                  </Form.Control.Feedback>\n                </InputGroup>\n              </Form.Group>\n              <Form.Group as={Row} className=\"my-2\">\n                <Form.Label>Password</Form.Label>\n                <InputGroup hasValidation>\n                  <InputGroup.Text\n                    className={\n                      !!errors.password && 'text-danger border border-danger'\n                    }\n                  >\n                    &#x1f512;\n                  </InputGroup.Text>\n                  <Form.Control\n                    type=\"password\"\n                    name=\"password\"\n                    autoComplete=\"new-password\"\n                    value={values.password}\n                    placeholder=\"**************\"\n                    isInvalid={!!errors.password}\n                    onChange={handleChange}\n                  />\n                  <Form.Control.Feedback type=\"invalid\">\n                    {capitalize(errors.password)}\n                  </Form.Control.Feedback>\n                </InputGroup>\n              </Form.Group>\n              <Button\n                type=\"submit\"\n                disabled={!isValid || !dirty}\n                className=\"mt-5 w-25 mx-2 inline-block\"\n              >\n                Login\n              </Button>\n            </Form>\n          )}\n        </Formik>\n      </Card.Body>\n      <Card.Footer className=\"d-flex flex-row-reverse align-items-center\">\n        <Button\n          variant=\"primary\"\n          className=\"w-50\"\n          as={Link}\n          to={routes.create_account.path}\n        >\n          Don't have an account?\n        </Button>\n      </Card.Footer>\n    </Card>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}