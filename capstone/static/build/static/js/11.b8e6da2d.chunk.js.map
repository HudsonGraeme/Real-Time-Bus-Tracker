{"version":3,"sources":["pages/Withdraw.jsx","components/TransactionPage.jsx"],"names":["Withdraw","useContext","UserContext","transact","user","schema","Yup","shape","account","required","amount","typeError","min","max","validNumber","balance","Number","POSITIVE_INFINITY","capitalize","name","formatCurrency","validationSchema","title","transactionType","submitFunction","TransactionPage","userSelectionSideEffect","useState","alert","setAlert","useEffect","open","timeout","setTimeout","clearTimeout","className","variant","type","message","Title","Body","onSubmit","resetForm","submitForm","initialValues","email","handleSubmit","handleChange","values","dirty","isValid","errors","Group","label","Select","value","disabled","isInvalid","first_name","last_name","parseFloat","username","Label","hasValidation","Text","id","Control","placeholder","onChange","Feedback"],"mappings":"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","file":"static/js/11.b8e6da2d.chunk.js","sourcesContent":["import * as Yup from 'yup';\nimport { UserContext } from '../services/UserContext';\nimport { useContext } from 'react';\nimport { formatCurrency, validNumber } from '../services/Utilities';\nimport TransactionPage from '../components/TransactionPage';\nimport capitalize from 'lodash/capitalize';\n\nconst Withdraw = () => {\n  const { transact, user } = useContext(UserContext);\n  const schema = Yup.object().shape({\n    account: Yup.string().required(),\n    amount: Yup.number()\n      .typeError('Please enter a valid, non-negative number')\n      .min(0.01, 'Please enter a value above zero')\n      .max(\n        validNumber(user.balance)\n          ? user.balance + 100\n          : Number.POSITIVE_INFINITY,\n        `Please enter a value below ${capitalize(\n          user.name\n        )}'s maximum overdraft limit (${formatCurrency(-100)})`\n      )\n      .required(),\n  });\n\n  return (\n    <TransactionPage\n      validationSchema={schema}\n      title={'Make a Withdrawal'}\n      transactionType={'Withdraw'}\n      submitFunction={transact}\n    />\n  );\n};\n\nexport default Withdraw;\n","import {\n  Card,\n  FloatingLabel,\n  InputGroup,\n  Button,\n  Form,\n  Alert,\n} from 'react-bootstrap';\nimport { Formik } from 'formik';\nimport { UserContext } from '../services/UserContext';\nimport { useContext } from 'react';\nimport capitalize from 'lodash/capitalize';\nimport { useState } from 'react';\nimport { formatCurrency, validNumber } from '../services/Utilities';\nimport { useEffect } from 'react';\n\nconst TransactionPage = ({\n  title,\n  transactionType,\n  validationSchema,\n  submitFunction,\n  userSelectionSideEffect = () => {},\n}) => {\n  const { user } = useContext(UserContext);\n  const [alert, setAlert] = useState({});\n\n  // Once the alert is shown, hide it after 2.5s\n  useEffect(() => {\n    if (!alert.open) {\n      return;\n    }\n    const timeout = setTimeout(() => setAlert({}), 2500);\n    return () => clearTimeout(timeout);\n  }, [alert]);\n\n  const submitForm = (amount) => {\n    if (transactionType === 'Withdraw' && amount > user.balance) {\n      setAlert({\n        open: true,\n        type: 'warning',\n        message:\n          'Successfully completed your transaction, however your account is in overdraft. Please make a deposit at your earliest convenience.',\n      });\n    } else {\n      setAlert({\n        open: true,\n        type: 'success',\n        message: 'Successfully completed your transaction.',\n      });\n    }\n    submitFunction(transactionType === 'Withdraw' ? -amount : amount);\n  };\n\n  return (\n    <Card className=\"mx-auto w-50 mt-5 p-5\">\n      {alert.open && <Alert variant={alert.type}>{alert.message}</Alert>}\n      <Card.Title className=\"mb-5 text-left display-4\">{title}</Card.Title>\n      <Card.Body>\n        <Formik\n          validationSchema={validationSchema}\n          onSubmit={({ amount }, { resetForm }) => {\n            submitForm(amount);\n            resetForm();\n          }}\n          initialValues={{\n            account: user.email,\n            amount: 0.0,\n          }}\n        >\n          {({ handleSubmit, handleChange, values, dirty, isValid, errors }) => (\n            <Form onSubmit={handleSubmit}>\n              <Form.Group className=\"my-2\">\n                <FloatingLabel\n                  label={\n                    !!errors.account\n                      ? capitalize(errors.account)\n                      : `Account to ${transactionType} ${\n                          transactionType === 'Withdraw' ? 'from' : 'to'\n                        }`\n                  }\n                  className={!!errors.account && 'text-danger font-weight-bold'}\n                >\n                  <Form.Select\n                    className=\"form-select mb-4\"\n                    value={values.account}\n                    name=\"account\"\n                    disabled\n                    isInvalid={!!errors.account}\n                  >\n                    <option\n                      key={`option-account-${user.username}`}\n                      value={user.email}\n                    >\n                      {`${capitalize(user.first_name)} ${capitalize(\n                        user.last_name\n                      )} (${\n                        validNumber(user.balance)\n                          ? formatCurrency(user.balance)\n                          : 'Balance Error'\n                      }) ${\n                        validNumber(user.balance) &&\n                        parseFloat(user.balance) <= 0\n                          ? '***Overdraft***'\n                          : ''\n                      }`}\n                    </option>\n                  </Form.Select>\n                </FloatingLabel>\n              </Form.Group>\n              <Form.Group className=\"my-2\">\n                <Form.Label>Amount</Form.Label>\n                <InputGroup hasValidation>\n                  <InputGroup.Text id=\"inputGroupPrepend\">$</InputGroup.Text>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"amount\"\n                    placeholder=\"99.99\"\n                    value={values.amount}\n                    onChange={handleChange}\n                    isInvalid={!!errors.amount}\n                  />\n                  <Form.Control.Feedback type=\"invalid\">\n                    {capitalize(errors.amount)}\n                  </Form.Control.Feedback>\n                </InputGroup>\n              </Form.Group>\n              <Button\n                type=\"submit\"\n                className=\"mt-5 w-50 mx-2 inline-block\"\n                disabled={!isValid || !dirty}\n              >\n                {`${transactionType} `}\n                {isValid &&\n                  validNumber(values.amount) &&\n                  formatCurrency(values.amount)}\n                {isValid &&\n                  ` ${\n                    transactionType === 'Withdraw' ? 'from' : 'into'\n                  } ${capitalize(user.first_name)}'s account`}\n              </Button>\n            </Form>\n          )}\n        </Formik>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default TransactionPage;\n"],"sourceRoot":""}